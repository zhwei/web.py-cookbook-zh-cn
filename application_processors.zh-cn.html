<table>
<tbody>
<tr class="odd">
<td align="left">layout: default</td>
</tr>
<tr class="even">
<td align="left">title: Application processors</td>
</tr>
</tbody>
</table>
<h1 id="application-processors">Application processors</h1>
<h2 id="问题">问题</h2>
<p>如何使用应用处理器，加载钩子(loadhooks)和卸载钩子(unloadhook)？</p>
<h2 id="解法">解法</h2>
<p>web.py可以在处理请求之前或之后，通过添加处理器(processor)来完成某些操作。</p>
<pre><code>def my_processor(handler): 
    print &#39;before handling&#39;
    result = handler() 
    print &#39;after handling&#39;
    return result

app.add_processor(my_processor)</code></pre>
<p>可以用加载钩子(loadhook)和卸载钩子(unloadhook)的方式来完成同样的操作，它们分别在请求开始之前和结束之后工作。</p>
<pre><code>def my_loadhook():
    print &quot;my load hook&quot;

def my_unloadhook():
    print &quot;my unload hook&quot;

app.add_processor(web.loadhook(my_loadhook))
app.add_processor(web.unloadhook(my_unloadhook))</code></pre>
<h2><a href="index.html">首页</a></h2>

<style>
pre {
    background-color:#F0F0F0;
    border:1px solid #CCCBBA;
       padding: 10px 10px 10px 20px;
}
code {
    background: inherit;
    color: inherit;
}
.warning {
    border: 1px solid #FFAAAA;
    padding: 10px;
    background-color: #FFF0F0;
}
</style>
